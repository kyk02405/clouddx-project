<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoView - 암호화폐 시세</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- A) Top Market Summary -->
    <div class="top-bar">
        <div class="container flex justify-between" id="global-stats">
            <span>시장 데이터 로딩중...</span>
        </div>
    </div>

    <!-- B) Header -->
    <header>
        <div class="container flex justify-between items-center header-content">
            <a href="#" class="brand" onclick="location.reload()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--primary);">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
                Crypto<span>View</span>
            </a>
            
            <nav class="flex items-center gap-4">
                <div class="search-box">
                    <svg width="16" height="16" fill="none" stroke="#999" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    <input type="text" id="searchInput" placeholder="코인 이름 검색...">
                </div>
                <select id="currencySelect" class="currency-select">
                    <option value="krw">KRW</option>
                    <option value="usd">USD</option>
                    <option value="jpy">JPY</option>
                </select>
                <button id="refreshBtn" title="새로고침" style="padding: 8px; background: transparent;"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M23 4v6h-6"></path><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg></button>
            </nav>
        </div>
    </header>

    <main class="container">
        
        <!-- VIEW 1: 대시보드 (기존 화면) -->
        <div id="dashboard-view">
            <h1 class="text-xl bold page-title">오늘의 암호화폐 시세</h1>
            <p class="text-sub" style="margin-bottom: 24px;">시가총액 기준 상위 50개 코인의 실시간 현황을 한눈에 확인하세요.</p>

            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">글로벌 시가총액</div>
                    <div id="mcap-card-content">
                        <div class="text-xl bold" id="total-mcap">-</div>
                        <div class="text-sm" id="mcap-change">-</div>
                        <div class="mini-chart" id="mcap-chart"></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">24시간 거래량</div>
                    <div id="vol-card-content">
                        <div class="text-xl bold" id="total-vol">-</div>
                        <div class="text-sm text-sub">최근 24시간</div>
                        <svg class="mini-chart" id="vol-chart" viewBox="0 0 100 40" preserveAspectRatio="none">
                            <rect x="0" y="20" width="8" height="20" fill="#dfe6e9"></rect><rect x="12" y="10" width="8" height="30" fill="#dfe6e9"></rect><rect x="24" y="25" width="8" height="15" fill="#dfe6e9"></rect><rect x="36" y="15" width="8" height="25" fill="#dfe6e9"></rect><rect x="48" y="5" width="8" height="35" fill="#dfe6e9"></rect><rect x="60" y="18" width="8" height="22" fill="#dfe6e9"></rect><rect x="72" y="22" width="8" height="18" fill="#dfe6e9"></rect><rect x="84" y="12" width="8" height="28" fill="#dfe6e9"></rect><rect x="96" y="8" width="8" height="32" fill="var(--primary)"></rect>
                        </svg>
                    </div>
                </div>
                <div class="card">
                    <div class="flex justify-between items-center" style="margin-bottom:12px;">
                        <div class="card-header" style="margin-bottom:0;">🔥 인기 트렌드</div>
                        <span class="text-xs text-sub">Top 3</span>
                    </div>
                    <ul class="trend-list" id="trending-list"><li>로딩중...</li></ul>
                </div>
            </div>

            <div class="flex justify-between items-center controls">
                <div class="tabs">
                    <button class="tab-btn active" data-filter="all">전체 보기</button>
                    <button class="tab-btn" data-filter="favorites">★ 즐겨찾기</button>
                </div>
                <div class="flex items-center gap-4">
                    <div class="toggle-switch" id="highlightToggle">
                        <div class="switch-bg"></div>
                        <span>상승 코인만 보기</span>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div id="loading" class="loader-container"><div class="spinner"></div><p>최신 시세를 불러오고 있습니다...</p></div>
                <div id="error" class="error-container hidden">
                    <p class="text-down bold">데이터 로드 실패 (API 제한)</p>
                    <button class="btn-retry" id="retryBtn">재시도</button>
                </div>
                <table id="coinTable" class="hidden">
                    <thead>
                        <tr>
                            <th style="width: 40px;"></th>
                            <th class="sort-btn" data-key="market_cap_rank">#</th>
                            <th class="sort-btn" data-key="name">코인명</th>
                            <th class="sort-btn" data-key="current_price">가격</th>
                            <th class="sort-btn" data-key="price_change_percentage_1h_in_currency">1h</th>
                            <th class="sort-btn" data-key="price_change_percentage_24h_in_currency">24h</th>
                            <th class="sort-btn" data-key="price_change_percentage_7d_in_currency">7d</th>
                            <th class="sort-btn" data-key="total_volume">24h 거래량</th>
                            <th class="sort-btn" data-key="market_cap">시가총액</th>
                            <th>최근 7일</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- VIEW 2: 상세 페이지 (Detail View) -->
        <div id="detail-view" class="hidden">
            <button id="backBtn" class="btn-back">← 목록으로 돌아가기</button>
            <div id="detail-content">
                <!-- JS로 내용 주입 -->
            </div>
        </div>

    </main>

    <footer style="text-align:center; padding: 20px; color: var(--text-sub); font-size: 12px; border-top: 1px solid var(--border);">
        <p>Data provided by CoinGecko API · Design Concept by CryptoView</p>
    </footer>

    <!-- JS Modules -->
    <script type="module" src="js/app.js"></script>
</body>
</html>